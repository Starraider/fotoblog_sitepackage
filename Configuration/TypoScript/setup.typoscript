######################
#### DEPENDENCIES ####
######################
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:bootstrap_package/Configuration/TypoScript/setup.typoscript">
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:skom_sitepackage/Configuration/TypoScript/setup.typoscript">
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:fotoblog_sitepackage/Configuration/TypoScript/ContentElement/setup.typoscript">

#############################################################
#### EXTENSIONS                                          ####
#### Manual inclusion to keep control over loading order ####
#############################################################
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:fotoblog_sitepackage/Configuration/TypoScript/Extension/Cookieman/setup.typoscript" condition="userFunc = TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::isLoaded('cookieman')">
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:fotoblog_sitepackage/Configuration/TypoScript/Extension/RxShariff/setup.typoscript" condition="userFunc = TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::isLoaded('rx_shariff')">
<INCLUDE_TYPOSCRIPT: source="FILE:EXT:fotoblog_sitepackage/Configuration/TypoScript/Extension/Blog/setup.typoscript" condition="userFunc = TYPO3\\CMS\\Core\\Utility\\ExtensionManagementUtility::isLoaded('blog')">

############################
#### Google Tag Manager ####
############################
page.headerData.23 = TEXT
page.headerData.23.value(
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NZK68Q5');</script>
)
##############
#### PAGE ####
##############
page {
    10 = FLUIDTEMPLATE
    10 {
        templateRootPaths {
            0 = EXT:bootstrap_package/Resources/Private/Templates/Page/
            1 = EXT:skom_sitepackage/Resources/Private/Templates/Page/
            2 = EXT:fotoblog_sitepackage/Resources/Private/Templates/Page/
            3 = {$page.fluidtemplate.templateRootPath}
        }
        partialRootPaths {
            0 = EXT:bootstrap_package/Resources/Private/Partials/Page/
            1 = EXT:skom_sitepackage/Resources/Private/Partials/Page/
            2 = EXT:fotoblog_sitepackage/Resources/Private/Partials/Page/
            3 = {$page.fluidtemplate.partialRootPath}
        }
        layoutRootPaths {
            0 = EXT:bootstrap_package/Resources/Private/Layouts/Page/
            1 = EXT:skom_sitepackage/Resources/Private/Layouts/Page/
            2 = EXT:fotoblog_sitepackage/Resources/Private/Layouts/Page/
            3 = {$page.fluidtemplate.layoutRootPath}
        }
    }
    includeCSS {
        theme = EXT:fotoblog_sitepackage/Resources/Public/Scss/Theme/theme.scss
    }

    includeJSLibs {

    }

    includeJS {

    }

    includeJSFooterlibs {

    }

    includeJSFooter {
        fotoblog_sitepackage_scripts = EXT:fotoblog_sitepackage/Resources/Public/JavaScript/Dist/scripts.js
    }
}

lib.contentElement {
    dataProcessing {
        999 = TYPO3\CMS\Frontend\DataProcessing\DatabaseQueryProcessor
        999 {
            if.isTrue.field = categories
            table = sys_category
            selectFields = sys_category.*
            pidInList = this
            recursive = 999
            join = sys_category_record_mm ON sys_category.uid = sys_category_record_mm.uid_local
            where.data = field:pid
            where.wrap = sys_category_record_mm.tablenames = 'pages' and sys_category_record_mm.uid_foreign='|'
            orderBy = sys_category.sorting
            as = pagecategories
        }
    }
}
